<!doctype html>
<html>
<head><meta charset="utf-8"><title>Register — Nerodiov</title><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="/styles.css"></head>
<body>
  <div class="container">
    <div class="card" style="max-width:420px;">
      <aside class="sidebar" style="width:120px;padding:12px">
        <img src="/img/cat.png" style="width:64px;height:64px;border-radius:50%;object-fit:cover">
      </aside>
      <main class="panel-main">
        <h2 class="h-title">Registrar</h2>
        <p class="h-sub">Crie sua conta</p>

        <div class="form-card">
          <form id="regForm">
            <div class="label">Email</div>
            <input class="input" name="email" placeholder="seu@exemplo.com" required>
            <div class="label">Senha</div>
            <input class="input" type="password" name="password" placeholder="senha" required>
            <div style="margin-top:12px">
              <button class="btn primary" type="submit">Criar conta</button>
              <a href="/login.html" class="btn">Voltar</a>
            </div>
          </form>
        </div>

        <div class="footer">Após registrar você será logado automaticamente.</div>
      </main>
    </div>
  </div>

<script>
document.getElementById('regForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const fd = new FormData(e.target);
  const body = { email: fd.get('email'), password: fd.get('password') };
  const res = await fetch('/api/register', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(body) });
  const j = await res.json();
  if(res.ok && j.ok) location.href = '/';
  else alert(j.error || 'Falha ao registrar');
});
</script>
</body>
</html>
